
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;font-family:나눔고딕,NanumGothic,돋움,Dotum }.code-cell {font-size: 12px;font-family:나눔고딕,NanumGothic,돋움,Dotum }.markdown-cell {font-size: 15px;font-family:나눔고딕,NanumGothic,돋움,Dotum }.latex-cell {font-size: 15px;font-family:나눔고딕,NanumGothic,돋움,Dotum }</style>
    </head>
    <body>
      
      <div id="titlearea">
        <h2>nodejs 강의자료</h2>
      </div>
      <div id="contentarea"><div class="cell markdown-cell"><h1>초기설정</h1>
<h2>들어가기에 앞서</h2>
<p>위 예제에서는 되도록 로직의 움직임을 한눈에 보고 이해할 수 있도록 callback이 많이 쓰였습니다. 하지만 비동기 프로그래밍의특성상 콜백을 많이 쓸 수 밖에 없고 콜백을 많이 쓰다보면 가독성이 떨어지는 문제점이 많이 발생하게 되는데 이를 방지하기위해 async-yeild 패턴을 사용하거나 async 패키지를 사용합니다.</p>
<h2>사용되는 패키지</h2>
<ul>
<li>body-parser</li>
<li>express</li>
<li>express-handlebars - view tempalte</li>
<li>mongoose</li>
<li>multer - express에서 제공하는 파일 업로드용 미들웨어</li>
<li>nodemon - 파일의 변경이 일어날 경우 자동으로 재시작하는 패키지</li>
<li>only - object중 원하는 데이터만 sorting하여 return하는 helper 패키지</li>
<li>path</li>
</ul>
<h2>파일구조</h2>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>├── app
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   ├── controllers
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   ├── models 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   ├── utils
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   └── views
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>├── config
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   ├── express.js
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   └── routes.js
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>├── index.js
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>├── package.json
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>├── public
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   ├── assets
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>│   └── uploads
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>└── index.js
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></pre>
<p>파일 구조의 경우 전형적인 MVC 패턴을 따르고 있습니다.</p>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">express</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'express'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">mongoose</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">fs</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'fs'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">/* <span class="ace_cjk" style="width:NaNpx">모</span><span class="ace_cjk" style="width:NaNpx">델</span> <span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">괄</span> <span class="ace_cjk" style="width:NaNpx">등</span><span class="ace_cjk" style="width:NaNpx">록</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">한</span> <span class="ace_cjk" style="width:NaNpx">모</span><span class="ace_cjk" style="width:NaNpx">듈</span> */</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">join</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'path'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">join</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">models</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">join</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">__dirname</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'app/models'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">app</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">express</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">/* <span class="ace_cjk" style="width:NaNpx">몽</span><span class="ace_cjk" style="width:NaNpx">고</span><span class="ace_cjk" style="width:NaNpx">디</span><span class="ace_cjk" style="width:NaNpx">비</span><span class="ace_cjk" style="width:NaNpx">연</span><span class="ace_cjk" style="width:NaNpx">결</span> */</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mongoose</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">connect</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongodb://localhost:27017/mobileapp'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//models <span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">괄</span><span class="ace_cjk" style="width:NaNpx">등</span><span class="ace_cjk" style="width:NaNpx">록</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">해</span> model<span class="ace_cjk" style="width:NaNpx">에</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">모</span><span class="ace_cjk" style="width:NaNpx">든</span><span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">을</span> require<span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">킵</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">간</span><span class="ace_cjk" style="width:NaNpx">편</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">게</span> require('../app/models/student')<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">여</span><span class="ace_cjk" style="width:NaNpx">도</span> <span class="ace_cjk" style="width:NaNpx">무</span><span class="ace_cjk" style="width:NaNpx">관</span><span class="ace_cjk" style="width:NaNpx">합</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">fs</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">readdirSync</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">models</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">filter</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">file</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_keyword ace_operator">~</span><span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">search</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_regexp">/</span><span class="ace_constant ace_language ace_escape">^[^</span><span class="ace_regexp ace_charclass ace_keyword ace_operator">\.</span><span class="ace_constant ace_language ace_escape">].*</span><span class="ace_regexp ace_keyword ace_operator">\.</span><span class="ace_string ace_regexp">js</span><span class="ace_constant ace_language ace_escape">$</span><span class="ace_string ace_regexp">/</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">forEach</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">file</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">join</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">models</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">file</span><span class="ace_paren ace_rparen">)))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">아</span><span class="ace_cjk" style="width:NaNpx">래</span><span class="ace_cjk" style="width:NaNpx">와</span> <span class="ace_cjk" style="width:NaNpx">같</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">분</span><span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">유</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">코</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">분</span><span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">처</span><span class="ace_cjk" style="width:NaNpx">리</span><span class="ace_cjk" style="width:NaNpx">와</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// dev<span class="ace_cjk" style="width:NaNpx">버</span><span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">과</span> product <span class="ace_cjk" style="width:NaNpx">버</span><span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">의</span> configure <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">다</span><span class="ace_cjk" style="width:NaNpx">르</span><span class="ace_cjk" style="width:NaNpx">게</span> require <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">함</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'./config/express'</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">app</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">//express <span class="ace_cjk" style="width:NaNpx">설</span><span class="ace_cjk" style="width:NaNpx">정</span> <span class="ace_cjk" style="width:NaNpx">적</span><span class="ace_cjk" style="width:NaNpx">용</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'./config/routes'</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">app</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// route <span class="ace_cjk" style="width:NaNpx">설</span><span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span> <span class="ace_cjk" style="width:NaNpx">적</span><span class="ace_cjk" style="width:NaNpx">용</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">listen</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">3000</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'running on port 3000'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h2>configure 파일</h2>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">express</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'express'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//view tempalte</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">exphbs</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'express-handlebars'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">path</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'path'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//body-parser<span class="ace_cjk" style="width:NaNpx">는</span> request<span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">서</span><span class="ace_cjk" style="width:NaNpx">의</span> body <span class="ace_cjk" style="width:NaNpx">안</span><span class="ace_cjk" style="width:NaNpx">의</span> text<span class="ace_cjk" style="width:NaNpx">들</span><span class="ace_cjk" style="width:NaNpx">을</span> nodejs<span class="ace_cjk" style="width:NaNpx">가</span> <span class="ace_cjk" style="width:NaNpx">읽</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">들</span><span class="ace_cjk" style="width:NaNpx">일</span> <span class="ace_cjk" style="width:NaNpx">수</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">는</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//json<span class="ace_cjk" style="width:NaNpx">과</span> <span class="ace_cjk" style="width:NaNpx">같</span><span class="ace_cjk" style="width:NaNpx">은</span><span class="ace_cjk" style="width:NaNpx">형</span><span class="ace_cjk" style="width:NaNpx">태</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">바</span><span class="ace_cjk" style="width:NaNpx">꾸</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">줍</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">bodyParser</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'body-parser'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//index.js <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">서</span><span class="ace_cjk" style="width:NaNpx">의</span> const app = express()<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">받</span><span class="ace_cjk" style="width:NaNpx">습</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">module</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">exports</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">app</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//import<span class="ace_cjk" style="width:NaNpx">한</span> bodyParser <span class="ace_cjk" style="width:NaNpx">미</span><span class="ace_cjk" style="width:NaNpx">들</span><span class="ace_cjk" style="width:NaNpx">웨</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">를</span> json <span class="ace_cjk" style="width:NaNpx">형</span><span class="ace_cjk" style="width:NaNpx">태</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">받</span><span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">해</span> <span class="ace_cjk" style="width:NaNpx">적</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">켜</span><span class="ace_cjk" style="width:NaNpx">줍</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">use</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">bodyParser</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">json</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">//</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">use</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">bodyParser</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">urlencoded</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">extended</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_constant ace_language ace_boolean">true</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">use</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">express</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">static</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'public'</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//view template<span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">한</span> handlebar<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">해</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">옵</span><span class="ace_cjk" style="width:NaNpx">션</span><span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">아</span><span class="ace_cjk" style="width:NaNpx">래</span><span class="ace_cjk" style="width:NaNpx">부</span><span class="ace_cjk" style="width:NaNpx">분</span><span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">서</span> <span class="ace_cjk" style="width:NaNpx">한</span><span class="ace_cjk" style="width:NaNpx">번</span> <span class="ace_cjk" style="width:NaNpx">더</span> <span class="ace_cjk" style="width:NaNpx">설</span><span class="ace_cjk" style="width:NaNpx">명</span><span class="ace_cjk" style="width:NaNpx">토</span><span class="ace_cjk" style="width:NaNpx">록</span> <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">겠</span><span class="ace_cjk" style="width:NaNpx">습</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">engine</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'.hbs'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">exphbs</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">extname</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">'.hbs'</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">partialsDir</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">__dirname</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_string">'/../app/views/partials'</span><span class="ace_punctuation ace_operator">,</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">defaultLayout</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">__dirname</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_string">'/../app/views/layouts/default.hbs'</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">layoutsDir</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">__dirname</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_string">'/../app/views/layouts'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">뷰</span> <span class="ace_cjk" style="width:NaNpx">템</span><span class="ace_cjk" style="width:NaNpx">플</span><span class="ace_cjk" style="width:NaNpx">릿</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">의</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">여</span><span class="ace_cjk" style="width:NaNpx">줍</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">set</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'view engine'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'.hbs'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//view<span class="ace_cjk" style="width:NaNpx">가</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">곳</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">의</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">여</span><span class="ace_cjk" style="width:NaNpx">줍</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">set</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'views'</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">path</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">join</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">__dirname</span><span class="ace_punctuation ace_operator">,</span><span class="ace_string">'/../app/views'</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h2>route.js 파일</h2>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">students</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'../app/controllers/students'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">컨</span><span class="ace_cjk" style="width:NaNpx">트</span><span class="ace_cjk" style="width:NaNpx">롤</span><span class="ace_cjk" style="width:NaNpx">러</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">가</span><span class="ace_cjk" style="width:NaNpx">져</span><span class="ace_cjk" style="width:NaNpx">옵</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">multer</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'multer'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span> <span class="ace_cjk" style="width:NaNpx">업</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">응</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">한</span> <span class="ace_cjk" style="width:NaNpx">미</span><span class="ace_cjk" style="width:NaNpx">들</span><span class="ace_cjk" style="width:NaNpx">웨</span><span class="ace_cjk" style="width:NaNpx">어</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">path</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'path'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">mongoose</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//multer<span class="ace_cjk" style="width:NaNpx">는</span> express<span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">서</span> <span class="ace_cjk" style="width:NaNpx">제</span><span class="ace_cjk" style="width:NaNpx">공</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> file upload<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">한</span> <span class="ace_cjk" style="width:NaNpx">미</span><span class="ace_cjk" style="width:NaNpx">들</span><span class="ace_cjk" style="width:NaNpx">웨</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">storage</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">multer</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">diskStorage</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span><span class="ace_cjk" style="width:NaNpx">할</span> <span class="ace_cjk" style="width:NaNpx">폴</span><span class="ace_cjk" style="width:NaNpx">더</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">destination</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">'./public/uploads/'</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span><span class="ace_cjk" style="width:NaNpx">할</span> <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">명</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_entity ace_name ace_function">filename</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">file</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">cb</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">름</span><span class="ace_cjk" style="width:NaNpx">을</span> ObjectId<span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">지</span><span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">유</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">름</span><span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">지</span><span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">할</span><span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> 1.jpg,2.jpg<span class="ace_cjk" style="width:NaNpx">등</span><span class="ace_cjk" style="width:NaNpx">과</span> <span class="ace_cjk" style="width:NaNpx">같</span><span class="ace_cjk" style="width:NaNpx">이</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">중</span><span class="ace_cjk" style="width:NaNpx">복</span><span class="ace_cjk" style="width:NaNpx">되</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">명</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">생</span><span class="ace_cjk" style="width:NaNpx">길</span> <span class="ace_cjk" style="width:NaNpx">수</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">어</span> <span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">러</span><span class="ace_cjk" style="width:NaNpx">한</span> <span class="ace_cjk" style="width:NaNpx">중</span><span class="ace_cjk" style="width:NaNpx">복</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">피</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">해</span> objectId<span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">넣</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">줍</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//objectId<span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> <span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span><span class="ace_cjk" style="width:NaNpx">할</span> <span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">점</span><span class="ace_cjk" style="width:NaNpx">의</span> timeStamp + <span class="ace_cjk" style="width:NaNpx">프</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">세</span><span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">번</span><span class="ace_cjk" style="width:NaNpx">호</span> + <span class="ace_cjk" style="width:NaNpx">랜</span><span class="ace_cjk" style="width:NaNpx">덤</span><span class="ace_cjk" style="width:NaNpx">숫</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">루</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">지</span><span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">에</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">중</span><span class="ace_cjk" style="width:NaNpx">복</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">될</span> <span class="ace_cjk" style="width:NaNpx">가</span><span class="ace_cjk" style="width:NaNpx">능</span><span class="ace_cjk" style="width:NaNpx">성</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">거</span><span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">없</span><span class="ace_cjk" style="width:NaNpx">습</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uploadedFile</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">mongoose</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Types</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">ObjectId</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ext</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">mimetype</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">split</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/'</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">콜</span><span class="ace_cjk" style="width:NaNpx">백</span><span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">첫</span><span class="ace_cjk" style="width:NaNpx">번</span><span class="ace_cjk" style="width:NaNpx">째</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">해</span><span class="ace_cjk" style="width:NaNpx">당</span> <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">업</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">한</span> <span class="ace_cjk" style="width:NaNpx">후</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">할</span> function<span class="ace_cjk" style="width:NaNpx">등</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">넣</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">주</span><span class="ace_cjk" style="width:NaNpx">며</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">두</span><span class="ace_cjk" style="width:NaNpx">번</span><span class="ace_cjk" style="width:NaNpx">째</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span><span class="ace_cjk" style="width:NaNpx">할</span> <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">명</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">cb</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language">null</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uploadedFile</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_string">'.'</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uploadedFile</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">ext</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">uploads</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">multer</span><span class="ace_paren ace_lparen">({</span> <span class="ace_identifier">storage</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">storage</span> <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">module</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">exports</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">app</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">get</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">index</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">get</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/show/:id'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">show</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">get</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/create'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">create</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span> <span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">해</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">진</span> <span class="ace_cjk" style="width:NaNpx">업</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">처</span><span class="ace_cjk" style="width:NaNpx">리</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> route<span class="ace_cjk" style="width:NaNpx">에</span> middleware<span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">적</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">합</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">post</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/store'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">uploads</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">any</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">store</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">get</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/edit/:id'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">edit</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">post</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/update'</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">update</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">app</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">post</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/delete'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">delete</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>route 형식</h3>
<table>
<thead>
<tr>
<th>url명</th>
<th style="text-align:center">method</th>
<th style="text-align:right">역활</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td style="text-align:center">index</td>
<td style="text-align:right">전체 유저 리스트를 보여줍니다.</td>
</tr>
<tr>
<td>/show/{id}</td>
<td style="text-align:center">get</td>
<td style="text-align:right">개별 사용자에 대한 정보를 view를 통해 출력합니다.</td>
</tr>
<tr>
<td>/create/</td>
<td style="text-align:center">get</td>
<td style="text-align:right">사용자 등록을 위한 form을  view를 통해 파싱합니다.</td>
</tr>
<tr>
<td>/store/</td>
<td style="text-align:center">post</td>
<td style="text-align:right">create view에서 폼데이터를 받아 데이터베이스에 저장합니다.</td>
</tr>
<tr>
<td>/edit/{id}</td>
<td style="text-align:center">get</td>
<td style="text-align:right">개별 사용자에 대한 정보를 view의 form에 출력해줍니다.</td>
</tr>
<tr>
<td>/update</td>
<td style="text-align:center">post</td>
<td style="text-align:right">edit view의 form데이터를 받아 기존 데이터를 업데이트 합니다.</td>
</tr>
<tr>
<td>/delete</td>
<td style="text-align:center">post</td>
<td style="text-align:right">데이터 삭제에 대한 정보를 받아 삭제합니다.</td>
</tr>
</tbody>
</table>
<p>위 예제에서는 edit과 delete를 전부  post method로 정의하였으나 method등이 중복되는 경우에는 되도록 수정할땐 PUT method를 삭제할땐 DELETE method를 사용하여 분기합니다.</p>
<h1>model</h1>
<h2>students.js</h2>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">'use strict'</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_doc">/**</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_doc"> * Module dependencies.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_doc"> */</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">mongoose</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">Schema</span>   <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Schema</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">StudentSchema</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Schema</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span><span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">String</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_keyword">default</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">''</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">trim</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_constant ace_language ace_boolean">true</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">stdId</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span><span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">String</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_keyword">default</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">''</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">trim</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_constant ace_language ace_boolean">true</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">age</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span><span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Number</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//ref<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">선</span><span class="ace_cjk" style="width:NaNpx">언</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span><span class="ace_cjk" style="width:NaNpx">것</span><span class="ace_cjk" style="width:NaNpx">은</span> RDB<span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">서</span><span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">외</span><span class="ace_cjk" style="width:NaNpx">부</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">선</span><span class="ace_cjk" style="width:NaNpx">언</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span><span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">과</span> <span class="ace_cjk" style="width:NaNpx">비</span><span class="ace_cjk" style="width:NaNpx">슷</span><span class="ace_cjk" style="width:NaNpx">합</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">photo</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Schema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">ObjectId</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">ref</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">'Upload'</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">createdAt</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span><span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Date</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_keyword">default</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Date</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">now</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//method<span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span><span class="ace_cjk" style="width:NaNpx">는</span> 'this' <span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">워</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">여</span> <span class="ace_cjk" style="width:NaNpx">개</span><span class="ace_cjk" style="width:NaNpx">별</span> <span class="ace_cjk" style="width:NaNpx">데</span><span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">터</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">다</span><span class="ace_cjk" style="width:NaNpx">룰</span><span class="ace_cjk" style="width:NaNpx">때</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">며</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//statics<span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">역</span><span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">다</span><span class="ace_cjk" style="width:NaNpx">룹</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">StudentSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">statics</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">개</span><span class="ace_cjk" style="width:NaNpx">별</span> id<span class="ace_cjk" style="width:NaNpx">값</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">조</span><span class="ace_cjk" style="width:NaNpx">회</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_entity ace_name ace_function">load</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">_id</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">cb</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_variable ace_language">this</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">findOne</span><span class="ace_paren ace_lparen">({</span><span class="ace_identifier">_id</span><span class="ace_paren ace_rparen">})</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>        <span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">populate</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'photo'</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>        <span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">exec</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">student</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>        <span class="ace_identifier">cb</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">student</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>        <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">체</span> <span class="ace_cjk" style="width:NaNpx">리</span><span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">트</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">생</span><span class="ace_cjk" style="width:NaNpx">성</span><span class="ace_cjk" style="width:NaNpx">일</span> <span class="ace_cjk" style="width:NaNpx">순</span><span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">조</span><span class="ace_cjk" style="width:NaNpx">회</span><span class="ace_cjk" style="width:NaNpx">합</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_entity ace_name ace_function">list</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">cb</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_variable ace_language">this</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">find</span><span class="ace_paren ace_lparen">({</span><span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">sort</span><span class="ace_paren ace_lparen">({</span><span class="ace_identifier">createdAt</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_constant ace_numeric">-1</span><span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">exec</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">students</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">cb</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">students</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">StudentSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'name'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'<span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">름</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">필</span><span class="ace_cjk" style="width:NaNpx">수</span><span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">항</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">StudentSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'stdId'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'<span class="ace_cjk" style="width:NaNpx">학</span><span class="ace_cjk" style="width:NaNpx">생</span><span class="ace_cjk" style="width:NaNpx">번</span><span class="ace_cjk" style="width:NaNpx">호</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">필</span><span class="ace_cjk" style="width:NaNpx">수</span><span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">항</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">StudentSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'age'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'<span class="ace_cjk" style="width:NaNpx">나</span><span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">필</span><span class="ace_cjk" style="width:NaNpx">수</span><span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">항</span><span class="ace_cjk" style="width:NaNpx">입</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mongoose</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">model</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'Student'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">StudentSchema</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></pre>
<h2>upload.js</h2>
<p>업로드 스키마를 따로 만드는 이유는 multer의 경우 미들웨어를 통해 사진을 먼저 업로드시키며 리턴값을 반환합니다. 또한 dropbox와 같은 이미지 ajax 업로드 플러그인을 사용할 경우에는 사진의 업로드가 먼저 이루어지게됩니다. 이 경우 사용자가 자신의 데이터를 삭제한 이후거나 회원등록을 하는 중간에 중단된경우 이미지가 계속 서버에 남아있어 서버의 불필요한 용량이 많아지는 현상이 생깁니다.</p>
<p>이를 피하기 위해 uploads를 통해 전체 등록되어있는 이미지를 저장하며 주기적으로 crontab을 통해 전체 업로드 폴더중 uploads 테이블에 들어있지 않은(등록되지 않은 필요없는) 데이터를 삭제하여줍니다. 또한 uploads 폴더를 통해 초기 사용자가 저장했던 파일명 타입등을 저장하여줍니다.</p>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">'use strict'</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_doc">/**</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_doc"> * Module dependencies.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_doc"> */</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">mongoose</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">Schema</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Schema</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//relatedId<span class="ace_cjk" style="width:NaNpx">와</span> type<span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">구</span><span class="ace_cjk" style="width:NaNpx">지</span> <span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">에</span> <span class="ace_cjk" style="width:NaNpx">넣</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">주</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">유</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">만</span><span class="ace_cjk" style="width:NaNpx">약</span> <span class="ace_cjk" style="width:NaNpx">회</span><span class="ace_cjk" style="width:NaNpx">원</span><span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">와</span> <span class="ace_cjk" style="width:NaNpx">게</span><span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">판</span><span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">가</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">고</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">회</span><span class="ace_cjk" style="width:NaNpx">원</span><span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">진</span> <span class="ace_cjk" style="width:NaNpx">업</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">와</span> <span class="ace_cjk" style="width:NaNpx">게</span><span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">판</span><span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">진</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">업</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">드</span> <span class="ace_cjk" style="width:NaNpx">되</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span><span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">도</span> <span class="ace_cjk" style="width:NaNpx">업</span><span class="ace_cjk" style="width:NaNpx">로</span><span class="ace_cjk" style="width:NaNpx">드</span><span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">나</span><span class="ace_cjk" style="width:NaNpx">를</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">게</span><span class="ace_cjk" style="width:NaNpx">됩</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>. <span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> relatedId<span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> <span class="ace_cjk" style="width:NaNpx">게</span><span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">판</span>id<span class="ace_cjk" style="width:NaNpx">나</span> <span class="ace_cjk" style="width:NaNpx">회</span><span class="ace_cjk" style="width:NaNpx">원</span>id<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">넣</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">주</span><span class="ace_cjk" style="width:NaNpx">고</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//type<span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">통</span><span class="ace_cjk" style="width:NaNpx">해</span> <span class="ace_cjk" style="width:NaNpx">현</span><span class="ace_cjk" style="width:NaNpx">재</span> id<span class="ace_cjk" style="width:NaNpx">값</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">게</span><span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">판</span> <span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">대</span><span class="ace_cjk" style="width:NaNpx">한</span> id<span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">지</span> <span class="ace_cjk" style="width:NaNpx">회</span><span class="ace_cjk" style="width:NaNpx">원</span> <span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">에</span> <span class="ace_cjk" style="width:NaNpx">대</span><span class="ace_cjk" style="width:NaNpx">한</span> id<span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">지</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">확</span><span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">할</span> <span class="ace_cjk" style="width:NaNpx">수</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">습</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">UploadSchema</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Schema</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">relatedId</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Schema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">ObjectId</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">외</span><span class="ace_cjk" style="width:NaNpx">래</span><span class="ace_cjk" style="width:NaNpx">키</span> <span class="ace_cjk" style="width:NaNpx">형</span><span class="ace_cjk" style="width:NaNpx">식</span><span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">데</span><span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">터</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">맵</span><span class="ace_cjk" style="width:NaNpx">핑</span><span class="ace_cjk" style="width:NaNpx">시</span><span class="ace_cjk" style="width:NaNpx">킴</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">String</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">filename</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">String</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">originalname</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">String</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">size</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Number</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">createdAt</span>  <span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">type</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Date</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_keyword">default</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Date</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">now</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">UploadSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'relatedId'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'Article title cannot be blank'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">UploadSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'filename'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'Article body cannot be blank'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">UploadSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'originalname'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'Article body cannot be blank'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">UploadSchema</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">path</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'size'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">required</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'Article body cannot be blank'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mongoose</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">model</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'Upload'</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">UploadSchema</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h1>controller</h1>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">/* Model <span class="ace_cjk" style="width:NaNpx">불</span><span class="ace_cjk" style="width:NaNpx">러</span><span class="ace_cjk" style="width:NaNpx">오</span><span class="ace_cjk" style="width:NaNpx">기</span>*/</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">mongoose</span>   <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'mongoose'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//mongoose.Promise = Promise;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">Student</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">mongoose</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">model</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'Student'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">Upload</span>  <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">mongoose</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">model</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'Upload'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">only</span>    <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'only'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">index</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//Student <span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">키</span><span class="ace_cjk" style="width:NaNpx">마</span><span class="ace_cjk" style="width:NaNpx">의</span> statics<span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">의</span><span class="ace_cjk" style="width:NaNpx">된</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">호</span><span class="ace_cjk" style="width:NaNpx">출</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">며</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">체</span> <span class="ace_cjk" style="width:NaNpx">리</span><span class="ace_cjk" style="width:NaNpx">스</span><span class="ace_cjk" style="width:NaNpx">트</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">가</span><span class="ace_cjk" style="width:NaNpx">져</span><span class="ace_cjk" style="width:NaNpx">옵</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">list</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">students</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>     <span class="ace_comment">//render<span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">고</span><span class="ace_cjk" style="width:NaNpx">자</span> <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">는</span> </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>     <span class="ace_comment">//view tempalte <span class="ace_cjk" style="width:NaNpx">의</span> <span class="ace_cjk" style="width:NaNpx">위</span><span class="ace_cjk" style="width:NaNpx">치</span><span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">받</span><span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">며</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>     <span class="ace_comment">//config/express.js <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">에</span><span class="ace_cjk" style="width:NaNpx">서</span> <span class="ace_cjk" style="width:NaNpx">정</span><span class="ace_cjk" style="width:NaNpx">의</span><span class="ace_cjk" style="width:NaNpx">된</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//app.set('views',path.join(__dirname,'/../app/views')) view <span class="ace_cjk" style="width:NaNpx">디</span><span class="ace_cjk" style="width:NaNpx">렉</span><span class="ace_cjk" style="width:NaNpx">토</span><span class="ace_cjk" style="width:NaNpx">리</span><span class="ace_cjk" style="width:NaNpx">를</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">기</span><span class="ace_cjk" style="width:NaNpx">준</span><span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">위</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">가</span><span class="ace_cjk" style="width:NaNpx">져</span><span class="ace_cjk" style="width:NaNpx">오</span><span class="ace_cjk" style="width:NaNpx">게</span> <span class="ace_cjk" style="width:NaNpx">됩</span><span class="ace_cjk" style="width:NaNpx">나</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">두</span><span class="ace_cjk" style="width:NaNpx">번</span><span class="ace_cjk" style="width:NaNpx">째</span><span class="ace_cjk" style="width:NaNpx">는</span> view temaplte<span class="ace_cjk" style="width:NaNpx">에</span> <span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">해</span><span class="ace_cjk" style="width:NaNpx">줄</span> <span class="ace_cjk" style="width:NaNpx">데</span><span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">터</span><span class="ace_cjk" style="width:NaNpx">값</span><span class="ace_cjk" style="width:NaNpx">을</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">받</span><span class="ace_cjk" style="width:NaNpx">습</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">render</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'students/index'</span><span class="ace_punctuation ace_operator">,</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">students</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">students</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">show</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">,</span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">load</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">params</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">id</span><span class="ace_punctuation ace_operator">,</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">student</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">render</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'students/show'</span><span class="ace_punctuation ace_operator">,</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">student</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">create</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">render</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'students/create'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">store</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">//onlt<span class="ace_cjk" style="width:NaNpx">를</span> <span class="ace_cjk" style="width:NaNpx">사</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">할</span><span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> body <span class="ace_cjk" style="width:NaNpx">오</span><span class="ace_cjk" style="width:NaNpx">브</span><span class="ace_cjk" style="width:NaNpx">젝</span><span class="ace_cjk" style="width:NaNpx">트</span><span class="ace_cjk" style="width:NaNpx">중</span> <span class="ace_cjk" style="width:NaNpx">인</span><span class="ace_cjk" style="width:NaNpx">자</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">받</span><span class="ace_cjk" style="width:NaNpx">는</span> name,StdId,age<span class="ace_cjk" style="width:NaNpx">만</span> return<span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">여</span><span class="ace_cjk" style="width:NaNpx">줍</span><span class="ace_cjk" style="width:NaNpx">니</span><span class="ace_cjk" style="width:NaNpx">다</span>.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">const</span> <span class="ace_identifier">student</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Student</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">only</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">'name stdId age'</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">save</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">result</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">throw</span> <span class="ace_keyword">new</span> <span class="ace_variable ace_language">Error</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">/* <span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span><span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">이</span> <span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">는</span><span class="ace_cjk" style="width:NaNpx">경</span><span class="ace_cjk" style="width:NaNpx">우</span> <span class="ace_cjk" style="width:NaNpx">한</span><span class="ace_cjk" style="width:NaNpx">번</span> <span class="ace_cjk" style="width:NaNpx">더</span> <span class="ace_cjk" style="width:NaNpx">분</span><span class="ace_cjk" style="width:NaNpx">기</span> <span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">은</span> <span class="ace_cjk" style="width:NaNpx">배</span><span class="ace_cjk" style="width:NaNpx">열</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">형</span><span class="ace_cjk" style="width:NaNpx">태</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">받</span><span class="ace_cjk" style="width:NaNpx">아</span><span class="ace_cjk" style="width:NaNpx">지</span><span class="ace_cjk" style="width:NaNpx">지</span><span class="ace_cjk" style="width:NaNpx">만</span> <span class="ace_cjk" style="width:NaNpx">무</span><span class="ace_cjk" style="width:NaNpx">조</span><span class="ace_cjk" style="width:NaNpx">건</span> <span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">나</span><span class="ace_cjk" style="width:NaNpx">이</span><span class="ace_cjk" style="width:NaNpx">므</span><span class="ace_cjk" style="width:NaNpx">로</span> 0<span class="ace_cjk" style="width:NaNpx">으</span><span class="ace_cjk" style="width:NaNpx">로</span> <span class="ace_cjk" style="width:NaNpx">처</span><span class="ace_cjk" style="width:NaNpx">리</span>*/</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">files</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">length</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"<span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span><span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">음</span>"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">/* <span class="ace_cjk" style="width:NaNpx">전</span><span class="ace_cjk" style="width:NaNpx">체</span><span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span> <span class="ace_cjk" style="width:NaNpx">체</span><span class="ace_cjk" style="width:NaNpx">크</span> */</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">files</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">forEach</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">file</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_storage ace_type">const</span> <span class="ace_identifier">upload</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Upload</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">relatedId</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">result</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"student"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">filename</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">filename</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">originalname</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">originalname</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">type</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">mimetype</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">size</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">file</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">size</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">연</span><span class="ace_cjk" style="width:NaNpx">결</span><span class="ace_cjk" style="width:NaNpx">되</span><span class="ace_cjk" style="width:NaNpx">어</span><span class="ace_cjk" style="width:NaNpx">있</span><span class="ace_cjk" style="width:NaNpx">는</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span><span class="ace_cjk" style="width:NaNpx">에</span> <span class="ace_cjk" style="width:NaNpx">한</span><span class="ace_cjk" style="width:NaNpx">번</span> <span class="ace_cjk" style="width:NaNpx">더</span> <span class="ace_cjk" style="width:NaNpx">저</span><span class="ace_cjk" style="width:NaNpx">장</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">upload</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">save</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">result</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">photo</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">result</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">save</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">redirect</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">edit</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">load</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">params</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">id</span><span class="ace_punctuation ace_operator">,</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">student</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">render</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'students/edit'</span><span class="ace_punctuation ace_operator">,</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">student</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">update</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">load</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">id</span><span class="ace_punctuation ace_operator">,</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">student</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">stdId</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">stdId</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">age</span> <span class="ace_keyword ace_operator">=</span>  <span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">age</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">save</span><span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">result</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">redirect</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'/'</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">exports</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">delete</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">req</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">res</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Student</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_dom">remove</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_id</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">req</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">body</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_storage ace_type">function</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">result</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">return</span> <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">send</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">err</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">sendStatus</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">200</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></pre>
<h1>view의 구조</h1>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">res</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">render</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'students/edit'</span><span class="ace_punctuation ace_operator">,</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">student</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">student</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>위와같이 선언한 경우 students에 있는 edit.hbs를 출력하게 되는데<br>
그냥 출력하는것이 아니라 layouts에 있는 default.hbs와 조합하여 출력하게됩니다.</p>
<p>edit.hbs에 있는 코드를 body에 넣어 출력하게됩니다.</p>
<pre><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//layouts.default.hbs<span class="ace_cjk" style="width:NaNpx">파</span><span class="ace_cjk" style="width:NaNpx">일</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">상</span><span class="ace_cjk" style="width:NaNpx">단</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span> <span class="ace_cjk" style="width:NaNpx">생</span><span class="ace_cjk" style="width:NaNpx">략</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">style</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"margin-top: 100px;"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">class</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"container"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_quasi ace_start">{</span><span class="ace_paren ace_lparen">{{</span><span class="ace_identifier">body</span><span class="ace_paren ace_rparen">}}</span><span class="ace_paren ace_quasi ace_end">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">하</span><span class="ace_cjk" style="width:NaNpx">단</span> <span class="ace_cjk" style="width:NaNpx">내</span><span class="ace_cjk" style="width:NaNpx">용</span> <span class="ace_cjk" style="width:NaNpx">생</span><span class="ace_cjk" style="width:NaNpx">략</span></span>
</div></div></div></pre>
</div></div>
      <script></script>
    </body>
    </html>
  